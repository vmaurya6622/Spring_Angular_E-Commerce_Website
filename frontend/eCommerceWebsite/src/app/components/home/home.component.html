<div [class.dark]="darkMode" class="page">

  <!-- NAVBAR -->
  <nav class="navbar">
    <div class="logo" (click)="goToHome()" style="cursor: pointer;">
      <img src="assets/logo.png" alt="InstaKart Logo">
    </div>

    <div class="search-bar">
      <input type="text" [(ngModel)]="searchText" placeholder="Search books...">
      <button>Search</button>
    </div>

    <div class="greeting" *ngIf="isLoggedIn">
      <span>Hi, {{ customerName }}! üëã</span>
    </div>

    <div class="nav-right">

      <div class="user-menu" (mouseenter)="showDropdown=true" (mouseleave)="showDropdown=false">
        <div class="user-circle">üë§</div>
        <div class="dropdown" *ngIf="showDropdown">
          <div *ngIf="isLoggedIn">
            <p (click)="navigateToProfile()" class="menu-item">Update Profile</p>
            <p (click)="navigateToAddress()" class="menu-item">My Address</p>
            <p (click)="navigateToOrders()" class="menu-item">Orders</p>
            <p (click)="logout()" class="logout-btn">Logout</p>
          </div>
          <div *ngIf="!isLoggedIn">
            <button class="dropdown-login-btn" (click)="login()">Login</button>
          </div>
        </div>
      </div>

      <button (click)="toggleTheme()">Switch Theme</button>
      <button (click)="goToCart()">üõí Cart</button>
    </div>
  </nav>
  
  <section class="hero">
		<h1>Shop the Latest Arrivals</h1>
		<p>Browse handpicked products and add them to your cart in one click.</p>
	</section>
  <!-- BOOK GRID -->


    <div class="grid">
      <div class="book-card" *ngFor="let book of paginatedBooks">

    <!-- Image -->
    <div class="image-wrapper">
      <img [src]="book.image" alt="">
    </div>

    <!-- Title -->
    <h3 class="book-title">{{ book.title }}</h3>

    <!-- Price -->
    <div class="price">‚Çπ{{ book.price }}</div>

    <!-- Rating -->
    <div class="rating">
      ‚≠ê‚≠ê‚≠ê‚≠ê¬Ω
      <span class="rating-value">4.5</span>
    </div>

    <!-- Bottom Section -->
    <div class="card-bottom">

      <button 
        *ngIf="book.stock > 0"
        (click)="addToCart(book)"
        class="add-btn">
        Add to Cart
      </button>

      <div *ngIf="book.stock > 0" class="stock-box">
        Stock: <span>{{ book.stock }}</span>
      </div>

      <div *ngIf="book.stock === 0" class="out-stock">
        Out of Stock
      </div>

    </div>

    <button class="details-btn" (click)="viewDetails(book.id)">View Details</button>

  </div>

  </div>


  <!-- PAGINATION -->
  <div class="pagination">
    <button (click)="changePage(currentPage - 1)">Prev</button>

    <button 
      *ngFor="let page of [].constructor(totalPages); let i = index"
      (click)="changePage(i + 1)"
      [class.active]="currentPage === i + 1">
      {{ i + 1 }}
    </button>

    <button (click)="changePage(currentPage + 1)">Next</button>
  </div>

  <!-- FOOTER -->
  <footer>
    <div class="about">
      <h4>About InstaKart</h4>
      <p>Your one-stop online Shopping with the best deals and latest products.</p>
    </div>

    <div class="tnc">
      <h4>Terms & Conditions</h4>
      <p>All purchases are subject to company policies and regulations.</p>
    </div>
  </footer>

</div>
